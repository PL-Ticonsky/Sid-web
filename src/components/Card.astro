---
const BASE = import.meta.env.BASE_URL;
const { href, title, image, type, ctaLabel, formUrl } = Astro.props;

// Si image viene como "/images/...", lo convertimos a "<BASE>images/..."
const imgSrc =
  typeof image === "string" && image.startsWith("/")
    ? `${BASE}${image.slice(1)}`
    : image;
---

<article class="overflow-hidden rounded-2xl border border-gray-200 bg-white hover:shadow-md transition">
  <a href={href} class="group block">
    <div class="aspect-[16/9] bg-gray-100 overflow-hidden">
      {imgSrc && (
        <img
          src={imgSrc}
          alt={title}
          class="h-full w-full object-cover group-hover:scale-[1.02] transition"
          loading="lazy"
        />
      )}
    </div>

    <div class="p-5">
      {type && <div class="text-xs font-semibold text-sid-purple mb-2">{type}</div>}
      <h3 class="font-poppins font-semibold text-lg leading-snug text-sid-navy">{title}</h3>
      {ctaLabel && (
        <div class="mt-3 text-sm font-semibold text-sid-blue group-hover:text-sid-cyan transition">
          {ctaLabel} â†’
        </div>
      )}
    </div>
  </a>

  {formUrl && (
    <div class="px-5 pb-5">
      <a
        href={formUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex w-full items-center justify-center rounded-xl bg-sid-pink px-4 py-2 text-sm font-semibold text-white hover:opacity-90 transition"
      >
        Participar
      </a>
    </div>
  )}
</article>
